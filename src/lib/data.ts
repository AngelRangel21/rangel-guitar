import type { Song } from "@/lib/types";

const initialSongs: Song[] = [
  {
    id: 1,
    title: 'El Karma',
    artist: 'Ariel Camacho',
    video: 'tJrdAPZXN6I',
    coverArt: 'https://placehold.co/400x400.png',
    lyrics:`
  Nací en el agua caliente,
  después vine a Culiacán,
  ahí me metí en el ambiente
  buscando billete para progresar.
  
  Se me empezó a ver dinero,
  Los Ángeles trafique,
  pero nunca falta un perro
  que mirando el hueso no quiera morder.

  Querían un secuestro exprés
  con mis hijas de rehén,
  a mi familia el precio
  no vendrá un pendejo a quererlo poner.

  Deseaba estar yo también
  pa' podérmelos comer,
  veo que me tenían respeto,
  sabían que con pleitos no iban a poder.

  No tarde pa' dar con ellos,
  y esa deuda fui a cobrar,
  dije de una vez al cuello
  por bravo ese perro lo voy amarrar.
  
  Llegue tumbando la puerta,
  el agua clara no está,
  ya me tenían la respuesta
  el 4 en la mesa me vine a topar.

  Mi browning hice accionar
  pero no me dio pa' mas,
  me contesto un R-15,
  esos proyectiles fueron mi final.

  El karma viene y se va,
  también se escucha por ahí
  que ese R-15 descansa,
  nadie de la parca se puede escapar.`,
  chords:`
  D
  Nací en el agua caliente,
                     A
  después vine a Culiacán,
  G                   D
  ahí me metí en el ambiente
  Bm           A
  buscando billete para 
         D
  progresar.
  
  
  Se me empezó a ver dinero,
                     A
  Los Ángeles trafique,
  G        A              D
  pero nunca falta un perro
  Bm               A
  que mirando el hueso 
                  D
  no quiera morder.
  
  Bm
  Querían un secuestro exprés
    D                      D7
  con mis hijas de rehén,
  G      A           D
  a mi familia el precio
  Bm                A
  no vendrá un pendejo 
                  D
  a quererlo poner.
  
  Deseaba estar yo también
  D
  pa' podérmelos comer,
  G            A           D
  veo que me tenían respeto,
  Bm               A
  sabían que con pleitos 
                 D
  no iban a poder.
  
  (Requinto)
  
  D
  No tarde pa' dar con ellos,
                        A
  y esa deuda fui a cobrar,
  G                      D
  dije de una vez al cuello
  Bm              A
  por bravo ese perro 
                D
  lo voy amarrar.
  
  Llegue tumbando la puerta,
                      A
  el agua clara no está,
  G         A             D
  ya me tenían la respuesta
  Bm           A
  el 4 en la mesa 
                 D
  me vine a topar.
  
  Bm
  Mi browning hice accionar
  D                        D7
  pero no me dio pa' mas,
  G      A         D
  me contesto un R-15,
  Bm           A
  esos proyectiles 
                 D
  fueron mi final.
  
  Bm
  El karma viene y se va,
  D
  también se escucha por ahí
  G        A          D
  que ese R-15 descansa,
  Bm             A
  nadie de la parca 
                  D
  se puede escapar.`
  },
  {
    id: 2,
    title: 'AFS',
    artist: 'Natanael Cano',
    coverArt: 'https://placehold.co/400x400.png',
    video: 'Y_IELatof9g',
    lyrics:  `
Empezamos a temprana edad
Solito se enseñó a trabajar
Ahora la vida le sonrió y no la hace cambiar
No se ocupará ni mencionar
Apoyo que carga es de familia
Con su gente siempre pa' arriba


Bien preparados pa' lo que pueda pasar
No se agüiten, que hay Chapo pa' más
Con mi gente para lo que digan
Ellos saben que aquí no hay salida


Andamos chambeando en la movida
Y andamos matando al azar
No ando preguntando, y pa' qué hablar
Y aquí somos puros de verdad


Recuerdos quedaron de aquel día
Se la pelaron, ya los traían
Arriba de la blindada con un corridón
Compa Kaby, póngase en acción
Que al cabo la brecha me la sé yo
Los plebes allá traen un refuegón


Más los carros que traemos acá en el convoy
En el radio se escucha el señor
De aquí salgo, pero como pueda
Ustedes plebes quédense en guerra


Que para eso cargan la bandera
Y no es cualquiera, es un charolón
Aquí andamos en el desierto
Salazar, para el que preguntó


Pa'l gabacho no pueden cruzar
No se ocupa, aquí hay jale de más
La bandera de aquel viejo aquí se respeta
Que se escuche Alfredo Salazar
Y por los pueblos los kilos cruzar
Las avionetas las miran bajar


Se van cargadas con peso pero de más
Buen piloto los que van fuera
El carrito para lo que digan
Con el equipo al frente lo miran


Andamos chambeando en la movida
Peleando lo que ocupe pelear
El miedo no existe, aquí hay lealtad
Y el billete ese ni se diga

Empezamos a temprana edad
Solito se enseñó a trabajar
Ahora la vida le sonrió y no la hace cambiar
No se ocupará ni mencionar
Apoyo que carga es de familia
Con su gente siempre pa' arriba

Bien preparados pa' lo que pueda pasar
No se agüiten, que hay Chapo pa' más
Con mi gente para lo que digan
Ellos saben que aquí no hay salida

Andamos chambeando en la movida
Y andamos matando al azar
No ando preguntando, y pa' qué hablar
Y aquí somos puros de verdad`,
    chords: `
D
Empezamos a temprana edad

E7
Solito se enseñó a trabajar

F#m
Ahora la vida le sonrió y no la hace cambiar

                       D
No se ocupará ni mencionar

                          E7
Apoyo que carga es de familia

                           F#m
Con su gente siempre pa' arriba


Bien preparados pa' lo que pueda pasar

                         D
No se agüiten, que hay Chapo pa' más

                  E7
Con mi gente para lo que digan

                        F#m
Ellos saben que aquí no hay salida


Andamos chambeando en la movida

                  D
Y andamos matando al azar

                       D
No ando preguntando, y pa' qué hablar

                 F#m
Y aquí somos puros de verdad


D
Recuerdos quedaron de aquel día

E7
Se la pelaron, ya los traían

F#m
Arriba de la blindada con un corridón

                          D
Compa Kaby, póngase en acción

                               E7
Que al cabo la brecha me la sé yo

                             F#m
Los plebes allá traen un refuegón


Más los carros que traemos acá en el convoy

                    D
En el radio se escucha el señor

                     E7
De aquí salgo, pero como pueda

                 F#m
Ustedes plebes quédense en guerra


Que para eso cargan la bandera

                           D
Y no es cualquiera, es un charolón

                   E7
Aquí andamos en el desierto

                    F#m
Salazar, para el que preguntó


D
Pa'l gabacho no pueden cruzar

E7
No se ocupa, aquí hay jale de más

F#m
La bandera de aquel viejo aquí se respeta

                           D
Que se escuche Alfredo Salazar

                               E7
Y por los pueblos los kilos cruzar

                         F#m
Las avionetas las miran bajar


Se van cargadas con peso pero de más

                    D
Buen piloto los que van fuera

                E7
El carrito para lo que digan

                   F#m
Con el equipo al frente lo miran


Andamos chambeando en la movida

                   D
Peleando lo que ocupe pelear

                         E7
El miedo no existe, aquí hay lealtad

                  F#m
Y el billete ese ni se diga

D
Empezamos a temprana edad
E7
Solito se enseñó a trabajar

F#m
Ahora la vida le sonrió y no la hace cambiar

                       D
No se ocupará ni mencionar

                          E7
Apoyo que carga es de familia

                           F#m
Con su gente siempre pa' arriba

Bien preparados pa' lo que pueda pasar

                         D
No se agüiten, que hay Chapo pa' más

                  E7
Con mi gente para lo que digan

                        F#m
Ellos saben que aquí no hay salida

Andamos chambeando en la movida

                  D
Y andamos matando al azar

                       D
No ando preguntando, y pa' qué hablar

                 F#m
Y aquí somos puros de verdad`
  },
  {
    id: 3,
    title: 'Botella Tras Botella',
    artist: 'Gera MX & Christian Nodal',
    coverArt: 'https://placehold.co/400x400.png',
    video: 'X4833E71zIA',
    lyrics: `
Botella tras botella, ando tomando pa' olvidarme de ella
De ella, de ella, nomás hablo de ella
Chingo a mi madre, si no vuelvo a beber por ella
Chingue a su madre, si no le vuelvo a escribir
Pero es que esa pinche vieja, me trae bien loco a mí

Y me puse a pensar
Que también a ti te reza, pero a otro le rezas
Y me puse a tomar
Y cuando senti acordé, la desvestía en la cama, de esas
De esas que nomás se dan una vez
De esas que si sabes no le dices a nadie
De esas que nomás se dan una vez
Y las que valen la pena, nunca son pa' siempre, ey

Y por eso
Botella tras botella, ando tomando pa' olvidarme de ella
De ella, de ella, nomás hablo de ella
Chingo a mi madre, si no vuelvo a beber por ella
Chingue a su madre, si no le vuelvo a escribir
Pero es que esa pinche vieja, me trae bien loco a mí

Y aquí sigo tomando con los plebes
Los mismos de siempre
Los que nunca me han dejado abajo
Ni tú, ni el presidente

Un saludo pa' los que no creyeron
Y pa' los que aquí siguen
Un salud por la que se fue
Y las bendiciones que vienen

Ando como Chris y Will Smith
Buscando la felicidad que nunca vi
Buscando un amor pa' mí
Pero sin buscarte a ti

Te topé sin planearlo
Y aunque pa'l amor soy un villano
Contigo se me olvida
Me siento un ser humano

Un simple borracho que te extraña en las pedas
Y que solo habla de ti, donde quiera que va
Pero tú bien sabes que...`,
    chords: `
[Intro]
Am G C F

[Verse 1]
    Am
Botella tras botella, ando tomando
           G
pa' olvidarme de ella
    C
De ella, de ella,
                      F
nomás hablo de ella

[Chorus]
                   Am
Chingo a mi madre, si no vuelvo a beber por ella
                   G
Chingue a su madre, si no le vuelvo a escribir
           C
Pero es que esa pinche vieja,
                     F
me trae bien loco a mí`
  }
];

declare global {
  var __songs: Song[] | undefined;
}

let songs: Song[];

if (process.env.NODE_ENV === 'production') {
  songs = [...initialSongs];
} else {
  if (!global.__songs) {
    global.__songs = [...initialSongs];
  } else {
    // This block fixes HMR issues by merging the initialSongs data into the 
    // existing global.__songs array. This ensures that updates to the hardcoded
    // songs are reflected, without losing any songs added at runtime.
    const songMap = new Map(global.__songs.map(song => [song.id, song]));
    initialSongs.forEach(song => {
      // Update the song in the map with the fresh data from initialSongs
      songMap.set(song.id, { ...songMap.get(song.id), ...song });
    });
    global.__songs = Array.from(songMap.values());
  }
  songs = global.__songs;
}

export { songs };

export function addSong(songData: Omit<Song, 'id'>): Song {
    const newId = songs.length > 0 ? Math.max(...songs.map(s => s.id)) + 1 : 1;
    const newSong: Song = {
        id: newId,
        ...songData,
    };
    songs.unshift(newSong);
    return newSong;
}

export function updateSong(id: number, songData: Partial<Omit<Song, 'id'>>): Song | undefined {
    const songIndex = songs.findIndex(s => s.id === id);
    if (songIndex === -1) {
        return undefined;
    }
    const updatedSong = { ...songs[songIndex], ...songData };
    songs[songIndex] = updatedSong;
    return updatedSong;
}

export function deleteSong(id: number): boolean {
    const songIndex = songs.findIndex(s => s.id === id);
    if (songIndex === -1) {
        return false;
    }
    songs.splice(songIndex, 1);
    return true;
}
